<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <style>
    .btn {
      margin-right: 5px;
      padding: 5px 10px;
      background: #333;
      color: #fff;
      text-decoration: none;
      border-radius: 4px;
    }
    </style>
  </head>
  <body>
    <p>下記ボタンよりダウンロードしてください。</p>
    <a id="download" download="<?= data.name ?>" class="btn">JSONファイルをダウンロード</a>
    <a id="copyBtn" href="#" class="btn">クリップボードにコピー</a>
    <script>
      var json = <?= data.json ?>;

      // ダウンロード
      var blob = new Blob([ json ], { "type" : "application/json" });
      document.getElementById("download").href = window.URL.createObjectURL(blob);

      // クリップボードにコピー
      var copyBtn = document.getElementById("copyBtn");
      copyBtn.addEventListener("click", function(e) {
        e.preventDefault();
        navigator.clipboard.writeText(json).then(function() {
          alert("JSONデータをクリップボードにコピーしました");
        }, function() {
          alert("コピーに失敗しました");
        });
      });
    </script>
  </body>
</html>
